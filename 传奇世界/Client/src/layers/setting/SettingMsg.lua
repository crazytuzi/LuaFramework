-- GAME_SET_ID_RIGHT_HAND = 1		--右手习惯								--
GAME_SET_ID_SCALE_RATE = 2		--人物缩放比例
-- GAME_SET_ID_USE_HP = 3			--低血量吃血药（大->小，小->大）		--
GAME_SET_ID_USE_RED_HP = 4		--低血量吃药对应的HP百分比值 持续
-- GAME_SET_ID_USE_MP = 5			--低血量吃蓝药（大->小，小->大）		--
GAME_SET_ID_USE_RED_MP = 6		--低血量吃药对应的MP百分比值 持续
GAME_SET_ID_PICKUP_MONEY = 7		--拾取金币
GAME_SET_ID_ELUDE_MONSTER = 8		--自动反击
GAME_SET_ID_PICKUP_WHITE_MATERIAL = 9	--捡取白色品质药
GAME_SET_ID_PICKUP_GREEN_MATERIAL = 10	--捡取绿色品质药
GAME_SET_ID_PICKUP_BLUE_MATERIAL = 11	--捡取蓝色品质药
GAME_SET_ID_PICKUP_VIOLET_MATERIAL = 12	--捡取紫色品质药
GAME_SET_ID_PICKUP_ORANGE_MATERIAL = 13	--捡取橙色品质药
GAME_SET_ID_AUTO_POISON = 14		--道士自动施毒
-- GAME_SET_ID_AUTO_GROUP_CURE = 15	--道士自动群疗						--
GAME_SET_ID_AUTO_THUNDER = 16		--法师自动地狱雷光
GAME_SET_ID_AUTO_ICE = 17		--法师自动冰咆哮
-- GAME_SET_ID_DISPLAYER_PLAYER_NUM = 18	--显示同屏人数					--
GAME_SET_ID_ENABLE_PUSH = 19	--push
GAME_SET_ID_CLOSE_MUSIC = 20		--关系音乐
GAME_SET_ID_CLOSE_VOICE = 21		--关系音效
GAME_SET_ID_SHIELD_MONSTER = 22		--屏蔽怪物
GAME_SET_ID_FORBID_TRADE = 23		--禁止他人向我发送交易
GAME_SET_ID_AUTO_FIRE = 24		--战士自动烈火
-- GAME_SET_ID_AUTO_ASSASSINATION = 25		--战士刺杀					--
GAME_SET_ID_AUTO_HALFMOON = 26		--战士半月斩
GAME_SET_ID_AUTO_SUMMON = 27		--道士召唤神兽
GAME_SET_ID_AUTO_ARMOUR = 28		--道士幽灵战甲
-- GAME_SET_ID_SHIELD_BEAUTY = 29		--屏蔽美人							--
GAME_SET_ID_SHIELD_PLAYER = 30		--屏蔽玩家
-- GAME_SET_ID_AUTO_THUNDER_ONE = 31	--法师自动雷电术				--
GAME_SET_ID_AUTO_USE_ITEM_HP = 32 	--自动使用瞬回药血量百分比
GAME_SET_ID_AUTO_USE_ITEM = 33 	--自动使用瞬回药
GAME_SET_ID_AUTO_SUMMON_GW = 34		--道士召唤骨卫
-- GAME_SET_ID_DEBUG = 35 	--开发者模式								--
GAME_SET_TEAM = 35 --自动允许组队
GAME_SET_ID_SHOW_FLOWERS = 36 	--屏蔽撒花
-- GAME_SET_ID_PICTURE = 37   --画面质量									--
GAME_SET_ID_USE_RED_HP_SHORT = 38  --低血量吃药对应的HP百分比值 瞬回
GAME_DEFAULT_DRUG_LONG_HP = 39 --设置默认的吃药方法 持续hp
GAME_DEFAULT_DRUG_SHORT_HP = 40 --瞬回hp
GAME_DEFAULT_DRUG_LONG_MP = 41 --持续mp
GAME_SET_ID_AUTO_DOUBLE_FIRE = 42 --自动双烈火
GAME_SET_MONSTER_NAMESHOW = 43 --是否显示怪物名称
GAME_SET_TOPARROW = 44 --是否显示头顶箭头
GAME_SET_PLAYERTITLE = 45 --是否显示角色称号
GAME_SET_AUTOCRASH = 46 --自动推人   （原来是自动野蛮）
GAME_SET_AUTOCRASHKILL = 47 --定向推人 （原来是自动突斩）
GAME_SET_FIRERING = 48 --自动抗拒火环
GAME_SET_LIONSHOUT = 49 --自动狮子吼
GAME_SET_ID_PICKUP_WHITE_EQUIP = 50	--捡取白色品质装备
GAME_SET_ID_PICKUP_GREEN_EQUIP = 51	--捡取绿色品质装备
GAME_SET_ID_PICKUP_BLUE_EQUIP = 52	--捡取蓝色品质装备
GAME_SET_ID_PICKUP_VIOLET_EQUIP = 53	--捡取紫色品质装备
GAME_SET_ID_PICKUP_ORANGE_EQUIP = 54	--捡取橙色品质装备
GAME_SET_ID_PICKUP_WHITE_OTHER = 55	--捡取白色品质其他
GAME_SET_ID_PICKUP_GREEN_OTHER = 56	--捡取绿色品质其他
GAME_SET_ID_PICKUP_BLUE_OTHER = 57	--捡取蓝色品质其他
GAME_SET_ID_PICKUP_VIOLET_OTHER = 58	--捡取紫色品质其他
GAME_SET_ID_PICKUP_ORANGE_OTHER = 59	--捡取橙色品质其他
GAME_SET_AUTO_DRUG = 60 --自动拾药开关
GAME_SET_AUTO_EQUIP =61 --自动拾装备开关
GAME_SET_AUTO_OTHER = 62 --自动拾其他开关
GAME_SET_SMARTFIGHT = 63 --战斗辅助功能开关
GAME_SET_SMARTCHOOSE = 64 --小箭靶功能开关
GAME_SET_HIDEFRIEND = 65 --隐藏好友  1 表示隐藏
GAME_SET_HIDETEAMPLAYER = 66 --隐藏队员		1 表示隐藏
GAME_SET_HIDEGUILDSPLAYER = 67 --隐藏行会成员	1 表示隐藏
GAME_SET_HIDEALLIANCEPLAYER = 68 --隐藏盟会成员	1 表示隐藏
GAME_SET_EQUIPTIP = 69 --装备提示
GAME_SET_PROPTIP = 70 --道具提示
GAME_SET_SHOWPLAYERNAME = 71 --显示玩家名称
GAME_SET_SHOWREDBAG = 72 --屏蔽红包特效
GAME_SET_SHOWSKILLEFFECT = 73 --屏蔽技能特效
GAME_SET_SHOWHURTNUMBER = 74 --显示伤害数字
GAME_SET_WINGHIDE = 75 --隐藏仙翼
GAME_SET_3G_VOICE_TRANSLATE_CLOSE = 76 --3G情况下是否关闭语音翻译(0:关闭翻译,1:开启翻译)
GAME_SET_RED2 = 77 --瞬回开关
GAME_SET_BLUE = 78 --回蓝开关
GAME_SET_SNOWLOTUS = 79 --雪莲开关
GAME_SET_VOICE_WORLD = 80        --自动播放世界语音
GAME_SET_VOICE_FACTION = 81      --自动播放行会语音
GAME_SET_VOICE_AREA = 82         --自动播放区域语音
GAME_SET_VOICE_PRIVATE = 83      --自动播放私聊语音
GAME_SET_VOICE_TEAM = 84         --自动播放组队语音
GAME_SET_VOICE_V2W = 85          --记录实时语音开关状态
GAME_SET_VOICE_VOICE = 86        --非wifi下语音
GAME_SET_VOICE_RECVFACTION = 87  --实时频道开关
GAME_SET_VOICE_SHOWFACTION = 88  --实时频道mic开关
GAME_SET_RED1 = 89 --回血开关
GAME_SET_VOICE_REALVOICE_OPEN = 90 --是否开启实时语聊
GAME_SET_TEAM_IN = 91  --自动允许入队
GAME_SET_MONSTER_DIEDSHOW = 92 --怪物死亡后尸体消失
GAME_SET_NPC_VOICE = 93  -- NPC音效
GAME_SET_ACTIVE_SKILL = 94  --激活施法
GAME_SET_CHOOSE_SKILL = 95  --选中施法
GAME_SET_MAGICSHIELD = 96 --自动魔法盾
GAME_SET_ZHANSHI_DEFENSE = 97 --自动金刚护体
GAME_SET_FASHI_DEFENSE = 98 --自动风影盾
GAME_SET_DAOSHI_DEFENSE = 99 --自动斗转星移
GAME_SET_ISINWXGROUP = 100 --是否在微信群中



local DefaultGameSet = {

	-- [GAME_SET_ID_RIGHT_HAND] = 1, 
	[GAME_SET_ID_SCALE_RATE] = 100,
	-- [GAME_SET_ID_USE_HP] = 1,
	[GAME_SET_ID_USE_RED_HP] = 80,
	-- [GAME_SET_ID_USE_MP] = 1,
	[GAME_SET_ID_USE_RED_MP] = 10,
	[GAME_SET_ID_PICKUP_MONEY] = 1,   --0 不拾取 1 拾取
	[GAME_SET_ID_ELUDE_MONSTER] = 0,  
	[GAME_SET_ID_PICKUP_WHITE_MATERIAL] = 1,  
	[GAME_SET_ID_PICKUP_GREEN_MATERIAL] = 1,  
	[GAME_SET_ID_PICKUP_BLUE_MATERIAL] = 1,   
	[GAME_SET_ID_PICKUP_VIOLET_MATERIAL] = 1,
	[GAME_SET_ID_PICKUP_ORANGE_MATERIAL] = 1, 
	[GAME_SET_ID_AUTO_POISON] = 0,
	--[GAME_SET_ID_AUTO_GROUP_CURE] = 0,
	[GAME_SET_ID_AUTO_THUNDER] = 0,
	[GAME_SET_ID_AUTO_ICE] = 0,
	-- [GAME_SET_ID_DISPLAYER_PLAYER_NUM] = 50,
	[GAME_SET_ID_ENABLE_PUSH] = 1,
	[GAME_SET_ID_CLOSE_MUSIC] = 1,
	[GAME_SET_ID_CLOSE_VOICE] = 1,
	[GAME_SET_ID_SHIELD_MONSTER] = 0,
	[GAME_SET_ID_FORBID_TRADE] = 0,
	[GAME_SET_ID_AUTO_FIRE] = 0,
	-- [GAME_SET_ID_AUTO_ASSASSINATION] = 0,
	[GAME_SET_ID_AUTO_HALFMOON] = 0,
	[GAME_SET_ID_AUTO_SUMMON] = 0,
	[GAME_SET_ID_AUTO_ARMOUR] = 0,
	-- [GAME_SET_ID_SHIELD_BEAUTY] = 0,
	[GAME_SET_ID_SHIELD_PLAYER] = 0,
	-- [GAME_SET_ID_AUTO_THUNDER_ONE] = 0,
	[GAME_SET_ID_AUTO_USE_ITEM_HP] = 25,
	[GAME_SET_ID_AUTO_USE_ITEM] = 1,
	[GAME_SET_ID_AUTO_SUMMON_GW] = 0,
	-- [GAME_SET_ID_DEBUG] = 0,	
	[GAME_SET_TEAM] = 1,
	[GAME_SET_ID_SHOW_FLOWERS] = 0 ,
	-- [GAME_SET_ID_PICTURE] = 25,  --流畅
	[GAME_SET_ID_USE_RED_HP_SHORT] = 80,
	[GAME_DEFAULT_DRUG_LONG_HP] = 25,
	[GAME_DEFAULT_DRUG_SHORT_HP] = 35,
	[GAME_DEFAULT_DRUG_LONG_MP] = 28,
	[GAME_SET_ID_AUTO_DOUBLE_FIRE] = 0,
	[GAME_SET_MONSTER_NAMESHOW] = 1,
	[GAME_SET_TOPARROW] = 1,
	[GAME_SET_PLAYERTITLE] = 1,
	[GAME_SET_AUTOCRASH] = 0,
	[GAME_SET_AUTOCRASHKILL] = 0,
	[GAME_SET_FIRERING] = 0,
	[GAME_SET_LIONSHOUT] = 0,
	[GAME_SET_ID_PICKUP_WHITE_EQUIP] = 1,
	[GAME_SET_ID_PICKUP_GREEN_EQUIP] = 1,
	[GAME_SET_ID_PICKUP_BLUE_EQUIP] = 1, 
	[GAME_SET_ID_PICKUP_VIOLET_EQUIP] = 1,
	[GAME_SET_ID_PICKUP_ORANGE_EQUIP] = 1,
	[GAME_SET_ID_PICKUP_WHITE_OTHER] = 1,   
	[GAME_SET_ID_PICKUP_GREEN_OTHER] = 1, 
	[GAME_SET_ID_PICKUP_BLUE_OTHER] = 1,   
	[GAME_SET_ID_PICKUP_VIOLET_OTHER] = 1, 
	[GAME_SET_ID_PICKUP_ORANGE_OTHER] = 1, 
	[GAME_SET_AUTO_DRUG] = 1,
	[GAME_SET_AUTO_EQUIP] = 1,
	[GAME_SET_AUTO_OTHER] = 1,
	[GAME_SET_SMARTFIGHT] = 1 ,
	[GAME_SET_SMARTCHOOSE] = 1 ,
	[GAME_SET_HIDEFRIEND] = 0 ,
	[GAME_SET_HIDETEAMPLAYER] = 0 ,
	[GAME_SET_HIDEGUILDSPLAYER] = 0 ,
	[GAME_SET_HIDEALLIANCEPLAYER] = 0 ,
	[GAME_SET_EQUIPTIP] = 1,
	[GAME_SET_PROPTIP] = 1,
	[GAME_SET_SHOWPLAYERNAME] = 1,
	[GAME_SET_SHOWREDBAG] = 0,
	[GAME_SET_SHOWSKILLEFFECT] = 0,
	[GAME_SET_SHOWHURTNUMBER] = 1,
	[GAME_SET_WINGHIDE] = 0,
	[GAME_SET_RED2] = 1,
	[GAME_SET_BLUE] = 1,
	[GAME_SET_SNOWLOTUS] = 0,
	[GAME_SET_VOICE_WORLD] = 0,
    [GAME_SET_VOICE_FACTION] = 0,
    [GAME_SET_VOICE_AREA] = 0,
    [GAME_SET_VOICE_PRIVATE] = 0,
    [GAME_SET_VOICE_TEAM] = 0,
    [GAME_SET_VOICE_V2W] = 0,
    [GAME_SET_VOICE_VOICE] = 0,
    [GAME_SET_VOICE_RECVFACTION] = 0,
    [GAME_SET_VOICE_SHOWFACTION] = 0,
	[GAME_SET_RED1] = 1,
    [GAME_SET_VOICE_REALVOICE_OPEN] = 0,
    [GAME_SET_TEAM_IN] = 1,
    [GAME_SET_MONSTER_DIEDSHOW] = 0,
    [GAME_SET_NPC_VOICE] = 1,
    [GAME_SET_ACTIVE_SKILL] = 1,
    [GAME_SET_CHOOSE_SKILL] = 0 ,
    [GAME_SET_MAGICSHIELD] = 1,
    [GAME_SET_ZHANSHI_DEFENSE] = 1,
    [GAME_SET_FASHI_DEFENSE] = 1,
    [GAME_SET_DAOSHI_DEFENSE] = 1,
    [GAME_SET_ISINWXGROUP] = 0,
}

-- if g_scrSize.width == 960 then
-- 	DefaultGameSet[GAME_SET_ID_SCALE_RATE] = 110
-- end

local SettingRelative = {
	{GAME_SET_ID_AUTO_THUNDER, GAME_SET_ID_AUTO_ICE},
	{ GAME_SET_ID_AUTO_HALFMOON},
}     

local SettingSkill = {
	[GAME_SET_ID_AUTO_POISON] = 3303,		--道士自动施毒[强化施毒]
	--[GAME_SET_ID_AUTO_GROUP_CURE] = 3003,	--道士自动群疗
	[GAME_SET_ID_AUTO_THUNDER] = 2003,		--法师自动地狱雷光
	[GAME_SET_ID_AUTO_ICE] = 2008,		--法师自动冰咆哮
	[GAME_SET_ID_AUTO_FIRE] = 1006,		--战士自动烈火
	[GAME_SET_ID_AUTO_DOUBLE_FIRE] = 1006, --战士自动双烈火
	-- [GAME_SET_ID_AUTO_ASSASSINATION] = 1003,		--战士刺杀
	[GAME_SET_ID_AUTO_HALFMOON] = 1004,		--战士半月斩
	[GAME_SET_ID_AUTO_SUMMON] = 3007,		--道士召唤神兽
	[GAME_SET_ID_AUTO_ARMOUR] = 3006,		--道士幽灵战甲
	[GAME_SET_ID_AUTO_SUMMON_GW] = 3012,    --道士召唤骨卫[强化骷髅]
	-- [GAME_SET_ID_AUTO_THUNDER_ONE] = 2002,	--法师自动雷电术
	[GAME_SET_AUTOCRASH] = {1005,1010},   --自动推人
	[GAME_SET_AUTOCRASHKILL] = {1005,1010}, --定向推人
	[GAME_SET_FIRERING] = 2005, --火环
	[GAME_SET_LIONSHOUT] = 3009, --狮子吼
	[GAME_SET_MAGICSHIELD] = 2004, --魔法盾
	[GAME_SET_ZHANSHI_DEFENSE] = 1008, --金刚护体
	[GAME_SET_FASHI_DEFENSE] = 2009, --风影盾
	[GAME_SET_DAOSHI_DEFENSE] = 3010, --斗转星移
}

getDefGameSetById = function(id)
	return DefaultGameSet[id]
end

local GameSetting = {}

getSettingSkill = function()
	return SettingSkill
end

getSettingRelative = function()
	return SettingRelative
end

isSettingSkill = function(setId)
	for k,v in pairs(SettingSkill) do
		if k == setId then
			return true
		end
	end

	return false
end

isSettingSkillSeted = function(skillId)
	for k,v in pairs(SettingSkill) do
		if type(v) == "table" then

		elseif v == skillId then
			--print(tostring(k))
			return (getGameSetById(k) == 1)
		end
	end
    -------------- 道士强化 召唤、施毒 设置要做特殊处理 ------------------
    if skillId == 3004 or skillId == 3008 then
	    if skillId == 3004 then -- 施毒术
	        return (getGameSetById(GAME_SET_ID_AUTO_POISON) == 1);
	    elseif skillId == 3008 then -- 骷髅召唤术
	        return (getGameSetById(GAME_SET_ID_AUTO_SUMMON_GW) == 1);
	    end
	end
	if skillId == 1005 or skillId == 1010  then
		return (getGameSetById(GAME_SET_AUTOCRASH) == 1) or (getGameSetById(GAME_SET_AUTOCRASHKILL) == 1)
	end
	return true
end

local SettingSmart = {
	[GAME_SET_HIDEFRIEND] = 0,		--隐藏好友
	[GAME_SET_HIDETEAMPLAYER] = 0,		--隐藏队员
	[GAME_SET_HIDEGUILDSPLAYER] = 0,	--隐藏行会成员	
	[GAME_SET_HIDEALLIANCEPLAYER] = 0, --隐藏盟会成员	
}

getSettingSkillId = function(setId)

	for k,v in pairs(SettingSkill) do
		if k == setId then
			return v
		end
	end

	return nil
end

getGameSetById = function(id,show)  --show 为了在设置界面上 关闭了总开关 小开关还会显示
	local gameset =  GameSetting[id] or DefaultGameSet[id]
	if not show then
		if (SettingSkill[id] or id == GAME_SET_ID_ELUDE_MONSTER) and  GameSetting[GAME_SET_SMARTFIGHT] == 0 then
			return 0
		elseif SettingSmart[id] and  GameSetting[GAME_SET_SMARTCHOOSE] == 0 then 
			return 0
		end
	end
	return gameset
end
--[[
local pathToSave = getDownloadDir()
local setfile = "set.cfg"
loadGameSettings = function(roleid)
	setfile = pathToSave.."set_"..tostring(roleid)..".cfg"
    local pFile =  io.open(setfile,"r")
    if pFile then
    	local set_id = true
    	while set_id do
        	set_id = pFile:read()
        	if set_id then
	        	local value = pFile:read() 
	        	setGameSetById(tonumber(set_id),tonumber(value))
	        	--GameSetting[tonumber(set_id)] = tonumber(value)
	        end
        end 
        pFile:close()
    end    
end

saveGameSettings = function()
    local pFile =  io.open(setfile,"w+")
    if pFile then
    	for k,v in pairs(GameSetting)do
    		if v ~= DefaultGameSet[k] then
	    		pFile:write(k)
	    		pFile:write("\n")
	    		pFile:write(v)
	    		pFile:write("\n")
	    	end
    	end
        pFile:close()
    end 
end
]]
loadGameSettings = function(roleid)
end
saveGameSettings = function()
end
setGameSetById = function(id,value,nosend)	
	local oldValue = getGameSetById(GAME_SET_ID_FORBID_TRADE)
	GameSetting[id] = value
	if (id == GAME_SET_ID_SCALE_RATE or  id == GAME_SET_ID_SHIELD_MONSTER or id ==GAME_SET_ID_SHIELD_PLAYER)
				and G_MAINSCENE and G_MAINSCENE.map_layer then 	
		if id == GAME_SET_ID_SCALE_RATE then
			G_MAINSCENE.map_layer:setDirectorScale(getGameSetById(GAME_SET_ID_SCALE_RATE)/100)
		elseif id == GAME_SET_ID_SHIELD_MONSTER then			
				--G_MAINSCENE.map_layer.hide_monster = not (value == 0)
			G_MAINSCENE.map_layer:setShowNormalMonster()
		elseif id ==GAME_SET_ID_SHIELD_PLAYER then 
			G_MAINSCENE.map_layer:setShowNormalPlayer()
		end
	elseif id == GAME_SET_ID_RIGHT_HAND and G_MAINSCENE then
		G_MAINSCENE:changeLeftRightMode(true)
	elseif id == GAME_SET_ID_CLOSE_MUSIC then
		AudioEnginer.setIsNoPlayMusic(value==0)
		setLocalRecord("music",value == 0)
		if value == 1 then 
			local q_music = getConfigItemByKey("MapInfo","q_map_id",G_MAINSCENE.mapId,"q_music")
			if q_music and not AudioEnginer.isBackgroundMusicPlaying() then
				AudioEnginer.playMusic("sounds/mapMusic/"..q_music..".mp3",true)
			end
		end
	elseif id == GAME_SET_ID_CLOSE_VOICE then
		setLocalRecord("effects",value == 0)
		AudioEnginer.setIsNoPlayEffects(value==0)
	elseif id == GAME_SET_ID_ENABLE_PUSH then
		if Device_target == cc.PLATFORM_OS_ANDROID then
			callStaticMethod("org/cocos2dx/lua/AppActivity", "turnOnorOffPush", {value==1}, "(Z)V")
		elseif Device_target ~= cc.PLATFORM_OS_WINDOWS then
	        callStaticMethod("getui","call",{type="isOn", value=value})
		end
	elseif id == GAME_SET_ID_FORBID_TRADE then
		if oldValue ~= value then
			local MtradeOp = require "src/layers/trade/tradeOp"
			MtradeOp:block(value==1)
		end
	-- elseif id == GAME_SET_ID_DEBUG then
	-- 	_G_NO_DEBUG = (value==0)
	elseif id == GAME_SET_ID_PICTURE then
		Director:setAnimationInterval(1.0 / value)
	elseif id == GAME_SET_MONSTER_NAMESHOW then
		if G_MAINSCENE and G_MAINSCENE.map_layer then
			for k,v in pairs(G_MAINSCENE.map_layer.monster_tab)do
				local monster_node = tolua.cast(G_MAINSCENE.map_layer.item_Node:getChildByTag(v),"SpriteMonster")
				if monster_node then
					monster_node:setNeedShowName(value == 1)
				end
			end
		end
	elseif id == GAME_SET_TOPARROW then
		if G_MAINSCENE and G_MAINSCENE.map_layer and G_ROLE_MAIN and G_ROLE_MAIN.sign_effect then
			if value == 1 then
				if G_ROLE_MAIN.sign_state == true then
					G_ROLE_MAIN.sign_effect:setVisible(value == 1)
				end
			else
				G_ROLE_MAIN.sign_effect:setVisible(value == 1)
			end
		end
	elseif id == GAME_SET_PLAYERTITLE then
		if G_MAINSCENE and G_ROLE_MAIN then
			updateTitleShow(value == 1)
		end
	elseif id == GAME_SET_WINGHIDE then
		if G_MAINSCENE and G_ROLE_MAIN then
			updateWingShow(value == 0)
		end
	elseif id == GAME_SET_SHOWSKILLEFFECT then
		if G_MAINSCENE and G_MAINSCENE.map_layer then
			local skill_item_Node = MapView:getSkillNode()
			if skill_item_Node then
				skill_item_Node:setVisible(value == 0)
			end
			local skill_down_Node = MapView:getSkillDownNode()
			if skill_down_Node then
				skill_down_Node:setVisible(value == 0)
			end
		end
	elseif id == GAME_SET_SHOWHURTNUMBER then
		MapView:resetShowHurt(value == 1)
	elseif id == GAME_SET_CHOOSE_SKILL then
		if value == 1 and G_MAINSCENE and G_ROLE_MAIN then
			G_ROLE_MAIN.base_data.spe_skill = {}
			G_MAINSCENE:reloadSkillConfig()
		end
	end
	--print("id,value",id,value)
	if G_ROLE_MAIN and not nosend then
		--print("id,value",id,value)		
		-- g_msgHandlerInst:sendNetDataByFmtExEx(GAMECONFIG_CS_CHANGE,"ici",G_ROLE_MAIN.obj_id,id,value)
		g_msgHandlerInst:sendNetDataByTableExEx(GAMECONFIG_CS_CHANGE, "GameConfigChangeProtocol", {["gameSetID"] = id , ["gameSetValue"] = value })
	end
end

resetGameSeting = function()
	GameSetting = {}
end


local setGameSetting = function(buff)
	GameSetting = {}
	-- local nums = buff:popChar()
	-- for i=1,nums do 
	-- 	setGameSetById(buff:popChar(),buff:popInt(),true)		
	-- end
	local t = g_msgHandlerInst:convertBufferToTable("GameConfigLoadDataRetProtocol", buff)
	local nums = t.gameSetNum
	for i=1,nums do 
		setGameSetById(t.gameConfig[i].key,t.gameConfig[i].value,true)		
	end
	--print("nums",nums)
	AudioEnginer.setIsNoPlayEffects(getGameSetById(GAME_SET_ID_CLOSE_VOICE)==0)
end
g_msgHandlerInst:registerMsgHandler(GAMECONFIG_SC_LOADDATA,setGameSetting)
